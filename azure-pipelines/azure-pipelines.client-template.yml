parameters:
  - name: ClientName
    type: string
  - name: Environment
    type: string
  - name: PoolName
    type: string

stages:
  - stage: Terraform
    displayName: 'Terraform Infrastructure'
    jobs:
      - template: templates/jobs/terraform.yml
        parameters:
          ClientName: ${{ parameters.ClientName }}
          Environment: ${{ parameters.Environment }}
          PoolName: ${{ parameters.PoolName }}

  - stage: Helm
    displayName: 'Helm Deployments'
    dependsOn: Terraform
    jobs:
      - template: templates/jobs/helm.yml
        parameters:
          ClientName: ${{ parameters.ClientName }}
          Environment: ${{ parameters.Environment }}
          PoolName: ${{ parameters.PoolName }}
